<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
        <meta charset="utf-8">
        <meta name="author" content="Neil Coffee, Jean-Pierre Koenig, Shakthi Poornima, Chris Forstall, Roelant Ossewaarde">
        <meta name="keywords" content="intertext, text analysis, classics, university at buffalo, latin">
        <meta name="description" content="Intertext analyzer for Latin texts">
        <link href="/css/style.css" rel="stylesheet" type="text/css">
        <link href="/images/favicon.ico" rel="shortcut icon">
        <title>Tesserae</title>
        <script src="/jquery.js" type="text/javascript"></script>
        <script src="/tesserae.js" type="text/javascript"></script>
        <script type="text/javascript">
            var lang = {
               "target": "la",
               "source": "la"
           }
           var selected = {
               "target": "vergil.georgics.part.1",
               "source": "catullus.carmina"
           }
           var feature = {
                "word": "exact word",
                "stem": "lemma",
                "3gr": "character 3-gram"
           }
            
           $(document).ready(function() {            
                $("#nav_main").load("/nav_main.html", {}, function(){
                    $("#nav_main_other").addClass("nav_selected")
                })
                $("#footer").load("/footer.html")
                $("#sel_part_source").load("/textlist." + lang["source"] + ".r.html")                        
                $("#sel_part_target").load("/textlist." + lang["target"] + ".r.html")
            })
            
            function validateForm() {
                var is_unselected = []
                
                if ($("#sel_part_source").selectedIndex < 0) {
                    is_unselected.push('source')
                }
                if ($("#sel_part_target").selectedIndex < 0) {
                    is_unselected.push('target')
                }
                if (! anySelected('unit')) { 
                    is_unselected.push('unit')
                }
                if (! anySelected('feature')) {     
                    is_unselected.push('feature')
                }
                if (document.getElementsByName('stop')[0].value.search(/[0-9]/) < 0) {
                    is_unselected.push('number of stop words')
                }
                if (! anySelected('stbasis')) {     
                    is_unselected.push('stoplist basis')
                }
                if (document.getElementsByName('dist')[0].value.search(/[0-9]/) < 0) {
                    is_unselected.push('maximum distance')
                }
                if (! anySelected('dibasis')) {     
                    is_unselected.push('distance metric')
                }
                if (document.getElementsByName('cutoff')[0].value.search(/[0-9]/) < 0) {
                    is_unselected.push('score cutoff')
                }
            
                var flag = true
                
                for (var i = 0; i < is_unselected.length; i++) {
                    is_unselected[i] = '\t-' + is_unselected[i]
                    flag = false
                }
                if (! flag) {           
                    alert('Select one or more values for the following:\n' + is_unselected.join('\n'))
                }
                
                return(flag)
            }
            
            function anySelected(name) {
                var options = document.getElementsByName(name)
                var flag = false
                
                for (i = 0; i < options.length; i++) {
                    if (options[i].checked) { 
                        flag = true
                    }
                }
                return(flag)
            }
        </script>
        <style type="text/css">
            #sel_part_source {
                height: 250px;
                width: 300px;
            }
            #sel_part_target {
                height: 250px;
                width: 300px;
            }
        </style>
    </head>
    <body>
        <div id="container">
            <div id="header">
                <div id="header_image">
                    <a href="/"><img src="/images/Tesserae.png" alt="Tesserae"></a>
                </div>
                <div id="navs">
                    <div id="nav_main"></div>
                    <div id="nav_sub"></div>
                </div>
            </div>
            <div id="main">
                <div class="main_content">
                <form action="/cgi-bin/batch.enqueue.pl" method="post" id="Form1" name="Form1">
                        <h1>
                            Batch Processing
                        </h1>
                        <p>
                            This experimental tool allows you to perform systematic series of Tesserae runs across a range of parameters. Select single or multiple options using the controls below; Tesserae will be run once for each possible combination of the options selected.
                        </p>
                        <p>
                            Depending on the number of searches necessary, results may take some time to generate.
                        </p>
                        <table class="input">
                            <tr>
                                <th>
                                    <label for="sel_part_source">Source:</label>
                                </th>
                                
                                <th>
                                    <label for="sel_part_target">Target:</label>
                                </th>
                            </tr>
                            <tr>
                                <td>
                                    <select id="sel_part_source" name="source" multiple="multiple">
                                    </select>
                                </td>
                                <td>
                                    <select id="sel_part_target" name="target" multiple="multiple">
                                    </select>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="main_content">
                        <table class="input">
                            <tr>
                                <th>
                                    Unit:
                                </th>
                                <td>
                                    <input type="checkbox" name="unit" value="line" id="sel_unit_line" checked="checked" />
                                    <label for="sel_unit_line">line</label>
                                    <input type="checkbox" name="unit" value="phrase" id="sel_unit_phrase" />
                                    <label for="sel_unit_phrase">phrase</label>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    Feature:
                                </th>
                                <td>
                                    <input type="checkbox" name="feature" id="sel_feature_word" value="word" />
                                    <label for="sel_feature_word">exact form only</label>
                                    <input type="checkbox" name="feature" id="sel_feature_stem" value="stem" checked="checked" />
                                    <label for="sel_feature_stem">lemma</label>
                                    <input type="checkbox" name="feature" id="sel_feature_3gr" value="3gr" />
                                    <label for="sel_feature_3gr">character 3-grams</label>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <label for="sel_stop">Number of stop words:</label>
                                </th>
                                <td>
                                    <input name="stop" id="sel_stop" size="80" maxlength="80" value="10" />
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    Stoplist basis:
                                </th>
                                <td>
                                    <input type="checkbox" name="stbasis" id="sel_stbasis_corpus" value="corpus" />
                                    <label for="sel_stbasis_corpus">corpus</label>
                                    <input type="checkbox" name="stbasis" id="sel_stbasis_target" value="target" />
                                    <label for="sel_stbasis_target">target</label>
                                    <input type="checkbox" name="stbasis" id="sel_stbasis_target" value="source" />
                                    <label for="sel_stbasis_source">source</label>
                                    <input type="checkbox" name="stbasis" id="sel_stbasis_both" value="both" checked="checked" />
                                    <label for="sel_stbasis_both">target + source</label>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    Score basis:
                                </th>
                                <td>
                                    <input type="checkbox" name="score" id="sel_score_word" value="word" />
                                    <label for="sel_score_word">word</label>
                                    <input type="checkbox" name="score" id="sel_score_stem" value="stem" checked="checked" />
                                    <label for="sel_score_stem">stem</label>
                                    <input type="checkbox" name="score" id="sel_score_feature" value="feature" />
                                    <label for="sel_score_feature">feature</label>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <label for="sel_dist">Maximum distance</label>:
                                </th>
                                <td>
                                    <input name="dist" id="sel_dist" size="80" maxlength="80" value="999" />
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    Distance metric:
                                </th>
                                <td>
                                    <input type="checkbox" name="dibasis" id="sel_dibasis_span" value="span" />
                                    <label for="sel_dibasis_span">span</label>
                                    <input type="checkbox" name="dibasis" id="sel_dibasis_freq" value="freq" checked="checked" />
                                    <label for="sel_dibasis_freq">frequency</label>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <label for="sel_cutoff">Score cutoff</label>:
                                </th>
                                <td>
                                    <input name="cutoff" id="sel_cutoff" size="80" maxlength="80" value="0">
                                </td>
                            </tr>
                        </table>
                        <div style="text-align:center; padding:20px;">
                            <input type="submit" value="Compare Texts" id="btnSubmit" name="btnSubmit">
                        </div>
                    <div id="textlists" style="visibility:hidden"></div>
                    </form>
                </div>
                <div id="footer"></div>
            </div><!-- closes container -->
        </div>
    </body>
</html>
