<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="author" content="Neil Coffee, Jean-Pierre Koenig, Shakthi Poornima, Chris Forstall, Roelant Ossewaarde">
		<meta name="keywords" content="intertext, text analysis, classics, university at buffalo, latin">
		<meta name="description" content="Intertext analyzer for Latin texts">
		<link href="/css/style.css" rel="stylesheet" type="text/css"/>
		<link href="/images/favicon.ico" rel="shortcut icon"/>
		
		<!--head_insert-->

		<title>Tesserae</title>
        <script src="/jquery.js"></script>
        <script src="/tesserae.js"></script>
        <script type="text/javascript">         
            $(document).ready(function() {
                
                $("#nav_main").load("/nav_main.html", function(){
                    $("#nav_main_search").addClass("nav_selected")
                })
                $("#footer").load("/footer.html")
                $("#metadata_details").click(function() {
                    $("#metadata_details").toggle()
                    $("#metadata_nodetails").toggle()
                })
                $("#metadata_nodetails").click(function() {
                    $("#metadata_details").toggle()
                    $("#metadata_nodetails").toggle()
                })
                
                var session = /*session*/ undefined /*session*/
                var batch = /*batch*/ "100" /*batch*/
                var page = /*page*/ "1" /*page*/
                var sort = /*sort*/ "score" /*sort*/
                var npages = /*npages*/ "1" /*npages*/
                
                if (session != undefined) {
                    $.getJSON("/cgi-bin/ajax-get-meta.pl", {"session":session}, function(meta) {
                        $("#md_session").text(session)
                        $("#md_source").text(meta.SOURCE)
                        $("#md_target").text(meta.TARGET)
                        $("#md_unit").text(meta.UNIT)
                        $("#md_feature").text(meta.FEATURE)
                        $("#md_stop").text(meta.STOP)
                        $("#md_stbasis").text(meta.STBASIS)
                        $("#md_stoplist").text(meta.STOPLIST.join(", "))
                        $("#md_dist").text(meta.DIST)
                        $("#md_dibasis").text(meta.DIBASIS)
                        $("#md_cutoff").text(meta.CUTOFF)
                         
                        $("#sel_batch").val(batch)
                        $("#sel_sort").val(sort)
                        $("#sel_page").val(page)

                        $("#form_sorter_sessionid").val(meta.SESSION)
                        $("#span_nresults").text(meta.TOTAL)
                        $("#span_npages").text(npages)
                        $("#form_pager_sort").val(sort)
                        $("#form_pager_batch").val(batch)
                        $("#form_pager_cutoff").val(meta.CUTOFF)
                        $("#form_pager_sessionid").val(meta.SESSION)
                        $("#form_alt_export_sort").val(sort)
                        $("#form_alt_export_batch").val(batch)
                        $("#form_alt_export_cutoff").val(meta.CUTOFF)
                        $("#form_alt_export_sessionid").val(meta.SESSION)
                        $("#form_alt_full_cutoff").val(meta.CUTOFF)
                        $("#form_alt_full_sessionid").val(meta.SESSION)
                        $("#form_alt_multi_sessionid").val(meta.SESSION)
                        
                        if (meta.FEATURE == "word" | meta.FEATURE == "stem"){
                            $("#alt_multi").show()
                        }
                        
                        $("#btn_first").click(function() {
                            $("#sel_page").val(1)
                            $("#form_pager").submit()
                        })
                        $("#btn_prev").click(function() {
                            $("#sel_page").val(parseInt(page) - 1)
                            $("#form_pager").submit()
                        })
                        $("#btn_next").click(function() {
                            $("#sel_page").val(parseInt(page) + 1)
                            $("#form_pager").submit()
                        })
                        $("#btn_last").click(function() {
                            $("#sel_page").val(parseInt(npages))
                            $("#form_pager").submit()
                        })

                        if (parseInt(page) == 1) {
                            $("#btn_first").attr("disabled", "disabled")
                            $("#btn_prev").attr("disabled", "disabled")
                        }
                        if (parseInt(page) == parseInt(npages)) {
                            $("#btn_last").attr("disabled", "disabled")
                            $("#btn_next").attr("disabled", "disabled")
                        }
                        if (parseInt(npages) == 1) {
                            $("#span_npages_message").hide()
                        }
                    })
                }
            })
        </script>
        <style type="text/css">
            div#alt_multi {
                display: none;
            }
        </style>
    </head>
    <body>
        <div id="container">
            <div id="header">
                <div id="header_image">
                    <a href="/">
                        <img src="/images/Tesserae.png" alt="Tesserae">
                    </a>
                </div>
                <div id="navs">
                    <div id="nav_main">
                    </div>
                    <div id="nav_sub">
                    </div>
                </div>
            </div>
            <div id="main">
                <div id="control_panel">
                    <div id="control_panel_left">
                        <div id="metadata_nodetails">
                            <h2>Show Details</h2>
                        </div>
                        <div id="metadata_details" style="display:none;">
                            <h2>Hide Details</h2>
                            <table>
                                <tr>
                                    <th>Session ID</th>
                                    <td id="md_session"></td>
                                </tr>
                                <tr>
                                    <th>Source</th>
                                    <td id="md_source"></td>
                                </tr>
                                <tr>
                                    <th>Target</th>
                                    <td id="md_target"></td>
                                </tr>
                                <tr>
                                    <th>Unit</th>
                                    <td id="md_unit"></td>
                                </tr>
                                <tr>
                                    <th>Feature</th>
                                    <td id="md_feature"></td>
                                </tr>
                                <tr>
                                    <th>Stoplist size</th>
                                    <td id="md_stop"></td>
                                </tr>
                                <tr>
                                    <th>Stoplist basis</th>
                                    <td id="md_stbasis"></td>
                                </tr>
                                <tr>
                                    <th>Stop words</th>
                                    <td id="md_stoplist"></td>
                                </tr>
                                <tr>
                                    <th>Max distance</th>
                                    <td id="md_dist"></td>
                                </tr>
                                <tr>
                                    <th>Distance metric</th>
                                    <td id="md_dibasis"></td>
                                </tr>
                                <tr>
                                    <th>Score cutoff</th>
                                    <td id="md_cutoff"></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div id="control_panel_center">
                        <div id="sorter">
                            <form action="/cgi-bin/read_bin.pl" method="get" id="form_sorter">
                                <table>
                                    <tr>
                                        <td>
                                            <label for="sel_sort">Sort by</label>
                                            <select id="sel_sort" name="sort">
                                                <option value="target">target locus</option>
                                                <option value="source">source locus</option>
                                                <option value="score">score</option>
                                            </select>
                                        </td>
                                        <td>
                                            <label for="sel_batch">Results/page</label>
                                            <select id="sel_batch" name="batch">
                                                <option value="50">50</option>
                                  				<option value="100">100</option>
                                  				<option value="200">200</option>
                                  				<option value="all">all</option>
                                  			</select>
                                       </td>
                                       <td>
                                           <input type="submit" value="Change Display">
                                       </td>                               
                                    </tr>
                                </table>
                                <input type="hidden" id="form_sorter_sessionid" name="session" />
                                <input type="hidden" id="form_pager_batch" name="batch" />
                            </form>
                        </div>
                        <div id="pager">
                            <form action="/cgi-bin/read_bin.pl" method="get" id="form_pager">
                                <table>
                                    <tr>
                                        <td>
                                            <span id="span_nresults"></span>
                                            results
                                            <span id="span_npages_message">
                                                in
                                                <span id="span_npages"></span>
                                                pages
                                            </span>
                                        </td>
                                       <td>
                                           <label for="sel_page">Go to page</label>
                                           <input type="button" id="btn_first" value="<<" />
                                           <input type="button" id="btn_prev" value="<" />
                                           <input type="text" id="sel_page" name="page" maxLength="5" size="5" />
                                           <input type="button" id="btn_next" value=">" />
                                           <input type="button" id="btn_last" value=">>" />
                                       </td>
                                      </tr>
                                  </table>
                                  <input type="hidden" id="form_pager_sessionid" name="session" />
                                  <input type="hidden" id="form_pager_sort" name="sort" />
                                  <input type="hidden" id="form_pager_cutoff" name="cutoff" />
                              </form>
                          </div>
                    </div>
                    <div id="control_panel_right">
                        <div id="alt_export">
                            <form action="/cgi-bin/read_bin.pl" method="get" id="form_alt_export">
                                <label for="sel_export">Export</label></th>
                                <select id="sel_export" name="export">
                                    <option value="csv">csv</option>
                                    <option value="tab">tab</option>
                                    <option value="xml">xml</option>
                                </select>
                                <input type="hidden" id="form_alt_export_sessionid" name="session" />
                                <input type="hidden" id="form_alt_export_sort" name="sort" />
                                <input type="hidden" id="form_alt_export_cutoff" name="cutoff" />
                                <input type="submit" value="Go" />
                            </form>
                        </div>
                        <div id="alt_full">
                            <form action="/cgi-bin/fulltext.pl" method="get" id="form_alt_full">
                                <input type="hidden" id="form_alt_full_sessionid" name="session" />
                                <input type="hidden" id="form_alt_full_cutoff" name="cutoff" />
                                <input type="submit" value="Full-text view" />
                            </form>
                        </div>
                        <div id="alt_multi">
                            <form action="/multi.html" method="get" id="form_alt_multi">
                                <input type="hidden" id="form_alt_multi_sessionid" name="session" />
                                <input type="submit" value="Multi-text search" />
                            </form>
                        </div>
                    </div>
                </div>
                <div id="results">
                    <table class="output">
                        <thead>
                            <tr>
                                <th></th>
                                <th class="phrase">target phrase</th>
                                <th class="phrase">source phrase</th>
                                <th>matched on</th>
                                <th>score</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!--results-->
                        </tbody>
                    </table>
                </div>
            </div>        		
            <div id="footer">
            </div>
        </div> <!-- closes container -->
    </body>
</html>

         