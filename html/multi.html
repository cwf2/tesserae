<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="author" content="Neil Coffee, Jean-Pierre Koenig, Shakthi Poornima, Chris Forstall, Roelant Ossewaarde">
		<meta name="keywords" content="intertext, text analysis, classics, university at buffalo, latin">
		<meta name="description" content="Intertext analyzer for Latin texts">
		<link href="/css/style.css" rel="stylesheet" type="text/css"/>
		<link href="/images/favicon.ico" rel="shortcut icon"/>
		
		<!--head_insert-->

        <title>Tesserae</title>
        <script src="/jquery.js"></script>
        <script src="/tesserae.js"></script>
        <script type="text/javascript">
            var lang = "la";

            $(document).ready(function() {            
                $("#nav_main").load("/nav_main.html")
                $("#footer").load("/footer.html")

                var url = document.URL
                var start = url.indexOf("?session=")
                var session = ""
                   
                if (start > -1) {
                   start = start + 9
                   if (url.length > start) {
                      session = url.substr(start, url.length-start)
                   }
                }
               
                if (session != undefined) {
                   
                   $.getJSON("/cgi-bin/ajax-get-meta.pl", {"session":session}, function(meta) {
                       $("#md_session").text(session)
                       $("#md_source").text(meta.SOURCE)
                       $("#md_target").text(meta.TARGET)
                       $("#md_unit").text(meta.UNIT)
                       $("#md_feature").text(meta.FEATURE)
                       $("#md_stop").text(meta.STOP)
                       $("#md_stbasis").text(meta.STBASIS)
                       $("#md_stoplist").text(meta.STOPLIST.join(", "))
                       $("#md_dist").text(meta.DIST)
                       $("#md_dibasis").text(meta.DIBASIS)
                       $("#md_cutoff").text(meta.CUTOFF)
                       
                       $("#sel_cross_ref").load("/textlist." + meta.LANG_TARGET + ".l.html", function() {
                           if (meta.UNIT == "line") {
                               $("#btn_prose").prop("disabled", "disabled")
                               $("#btn_prose").prop("title", "Can't search prose texts when Feature is 'line'.")
                               $("#sel_cross_ref option.prose").remove()
                           }                           
                       })
                       
                       $("#btn_cancel").click(function(){window.location.href = "/cgi-bin/read_bin.pl?session=" + session})
                       $("#form_launch_sessionid").val(session)
                   })
                } else {
                    $("#btn_search").prop("disabled", "disabled")
                    $("#btn_cancel").prop("disabled", "disabled")
                }
                
                $("#btn_none").click(function() {
                    $("#sel_cross_ref option").prop("selected", false)
                })
                $("#btn_verse").click(function() {
                    $("#sel_cross_ref option").prop("selected", false)
                    $("#sel_cross_ref option.verse").prop("selected", true)
                })
                $("#btn_prose").click(function() {
                    $("#sel_cross_ref option").prop("selected", false)
                    $("#sel_cross_ref option.prose").prop("selected", true)
                })
                $("#btn_all").click(function() {
                    $("#sel_cross_ref option").prop("selected", true)
                })
            })
        </script>
        <style type="text/css">
            div#base_search {
                position: absolute;
                width: 400px;
                left: 0px;
                height: 260;
                top: 0px;
            }
            div#cross_ref {
                position: absolute;
                left: 401px;
                width: 500px;
                text-align: left;
            }
            #sel_cross_ref {
                height: 300px;
                width: 100%;
            }
            div#launch_multi {
                position: absolute;
                width: 400px;
                left: 0px;
                height: 40px;
                top: 260px;
            }
        </style>
    </head>
    <body>
        <div id="container">
            <div id="header">
                <div id="header_image">
                    <a href="/">
                        <img src="/images/Tesserae.png" alt="Tesserae">
                    </a>
                </div>
                <div id="navs">
                    <div id="nav_main">
                    </div>
                    <div id="nav_sub">
                    </div>
                </div>
            </div>
            <div id="main">
                <div class="main_content_wide">
                    <form action="/cgi-bin/multitext.pl" method="get" id="form_launch_multi">
                    <div id="base_search">
                        <h2>Base search</h2>
                        <table>
                            <tr>
                                <th>Session ID</th>
                                <td id="md_session"></td>
                            </tr>
                            <tr>
                                <th>Source</th>
                                <td id="md_source"></td>
                            </tr>
                            <tr>
                                <th>Target</th>
                                <td id="md_target"></td>
                            </tr>
                            <tr>
                                <th>Unit</th>
                                <td id="md_unit"></td>
                            </tr>
                            <tr>
                                <th>Feature</th>
                                <td id="md_feature"></td>
                            </tr>
                            <tr>
                                <th>Stoplist size</th>
                                <td id="md_stop"></td>
                            </tr>
                            <tr>
                                <th>Stoplist basis</th>
                                <td id="md_stbasis"></td>
                            </tr>
                            <tr>
                                <th>Stop words</th>
                                <td id="md_stoplist"></td>
                            </tr>
                            <tr>
                                <th>Max distance</th>
                                <td id="md_dist"></td>
                            </tr>
                            <tr>
                                <th>Distance metric</th>
                                <td id="md_dibasis"></td>
                            </tr>
                            <tr>
                                <th>Score cutoff</th>
                                <td id="md_cutoff"></td>
                            </tr>
                        </table>
                    </div>
                    <div id="launch_multi">
                        <input id="btn_search" type="submit" value="Launch multi-search" />
                        <input id="btn_cancel" type="button" value="Back to results" />
                    </div>
                    <div id="cross_ref">
                        <h2>Select texts to cross-reference</h2>
                        <div id="cat_select">
                            <input id="btn_none" type="button" value="none" />
                            <input id="btn_verse" type="button" value="verse" />
                            <input id="btn_prose" type="button" value="prose" />
                            <input id="btn_all" type="button" value="all" />
                        </div>
                        <select id="sel_cross_ref" multiple="multiple" name="include">
                        </select>
                        <input id="form_launch_sessionid" type="hidden" name="session"/>
                    </div>
                </form>
                </div>
            </div>
            <div id="footer">
            </div>
        </div> <!-- closes container -->
    </body>
</html>

         