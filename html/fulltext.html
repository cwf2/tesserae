<html>
	<head lang="en-US">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="author" content="Neil Coffee, Jean-Pierre Koenig, Shakthi Poornima, Chris Forstall, Roelant Ossewaarde, James Gawley">
		<meta name="keywords" content="intertext, text analysis, classics, university at buffalo, latin">
		<meta name="description" content="Intertext analyzer for Latin texts">

		<link href="/css/style.css" rel="stylesheet" type="text/css"/>
		<link href="/images/favicon.ico" rel="shortcut icon"/>
		
		<script src="/tesserae.js"></script>
		<script src="/jquery.js"></script>

		<!--head_insert-->

		<title>Tesserae</title>

		<style type="text/css">
			#twopane {
				position: relative;
				width: 100%;
				height: 50%;
			}
			#source {
				position: absolute;
				width: 50%;
				height: 100%;
				top: 0px;
				left: 50%;
				overflow: scroll;
			}
			#target {
				position: absolute;
				width: 50%;
				height: 100%;
				top: 0px;
				left: 0%;
				overflow: scroll;
			}
			.super {
				background-color: yellow;
				border: 1px solid black;
			}
		</style>
	</head>
	<body>

		<div id="container">

			<div id="header"> 
		
			</div>
			<div id="alt_view">
				<form action="/cgi-bin/read_bin.pl" method="get">
					<input type="hidden" name="session" value="<!--session-->" />
					<input type="submit" value="Back to results" />
				</form>
			</div>
			<div id="twopane">
			<div id="source">
			</div>
			<div id="target">
			</div>
			</div>
			<div id="footer">
				<!--footer-->
			</div>
		</div>
		<script type="text/javascript">
			var sentinel = 0
			var arg = {
				session: /*session*/,
				source: /*source*/,
				target: /*target*/,
				part_target: /*part_target*/,
				part_source: /*part_source*/,
				unit: /*unit*/
			}	

			function check_sentinel() {
				sentinel += 1
				if (sentinel == 2) {
					load_results()
				}
			}

			function load_results() {
	 			$.getJSON("/cgi-bin/read_bin.pl", {session: arg.session, export: "json"}, function(tesresults) { 
					var n = tesresults.length
					for (var i = 0; i < n; i++) {
						highlight_result(tesresults[i])
					}
				})
			}
			$.get("/header.html", {}, function(data) { $("#header").html(data)})
			$.get("/footer.html", {}, function(data) { $("#footer").html(data)})
			$.get("/cgi-bin/ft.pl", {source: arg.source, unit: arg.unit, part: arg.part_source}, function(data) { 
				$("#source").html(data)
				check_sentinel()
			})
			$.get("/cgi-bin/ft.pl", {source: arg.target, unit: arg.unit, part: arg.part_target}, function(data) { 
				$("#target").html(data)
				check_sentinel()
			})
		</script>
	</body>
</html>
